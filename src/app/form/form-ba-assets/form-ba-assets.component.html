<ng-template #tableView>
  <h1 class="py-3 text-center text-3xl font-semibold text-gray-800">Form BA Assets</h1>
  <div class="flex w-full pb-4 px-2 bg-white">
    <label for="table-search" class="sr-only">Search</label>
    <div class="relative">
      <div class="absolute inset-y-0 left-0 rtl:inset-r-0 rtl:right-0 flex items-center ps-3 pointer-events-none">
        <svg class="w-5 h-5 text-gray-500" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd"
            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
            clip-rule="evenodd"></path>
        </svg>
      </div>
      <input type="text" id="table-search"
        class="block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg lg:w-80 md:w-64 sm:w-40 bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
        placeholder="Search for items">
    </div>
    <!-- <button type="button" 
    class="ml-auto text-white bg-[#1da1f2] hover:bg-[#1da1f2]/90 focus:ring-4 focus:outline-none focus:ring-[#1da1f2]/50 font-medium rounded-lg text-sm px-2 py-1 md:px-5 md:py-2.5 text-center inline-flex items-center">
    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 hidden md:block"
      stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg">
      <path d="M12 5.25v13.5"></path>
      <path d="M18.75 12H5.25"></path>
    </svg>
    <span>Add Form</span>
  </button> -->
  </div>

  <div class="flex flex-col overflow-y-scroll h-[70vh]">
    <!-- <p class="text-xs">yg 1 lagi lupa</p>
    <p class="text-xs">blm tau isi dari ba pengembalian</p>
    <p class="text-xs">blm paham form_ticekt</p> -->

    <table class="w-full text-sm text-left rtl:text-right text-gray-500">
      <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 z-10">
        <tr>
          <th scope="col" class="px-6 py-3">No.</th>
          <th scope="col" class="px-6 py-3">No. Formulir</th>
          <th scope="col" class="px-6 py-3">Jenis</th>
          <th scope="col" class="px-6 py-3">PIC</th>
          <th scope="col" class="px-6 py-3">Jabatan</th>
          <th scope="col" class="px-6 py-3">Kode Aset</th>
          <!-- <th scope="col" class="px-6 py-3">penerima</th> -->
          <!-- <th scope="col" class="px-6 py-3">Departemen</th> -->
          <th scope="col" class="px-6 py-3 text-center">
            Status</th>
          <th scope="col" class="px-6 py-3 text-center">Action</th>
        </tr>
      </thead>
      <tbody>

        <!-- <ng-container *ngIf="role_code === 'A'"> -->
        <tr *ngFor="let beritaAcara of beritaAcaras; let i = index" class="bg-white border-b hover:bg-gray-50">
          <!-- <ng-container *ngIf="matchesSearch(itemFormDA)"> -->
          <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">{{i+1}}</th>
          <td class="px-6 py-4">{{beritaAcara.form_number}}</td>
          <td class="px-6 py-4">{{beritaAcara.jenis}}</td>
          <td class="px-6 py-4">{{beritaAcara.nama_pic}}</td>
          <td class="px-6 py-4">{{beritaAcara.jabatan_pic}}</td>
          <td class="px-6 py-4">{{beritaAcara.kode_asset}}</td>
          <!-- <td class="px-6 py-4">
              <div class="flex -space-x-4 rtl:space-x-reverse">
                <img class="w-10 h-10 border-2 border-white rounded-full dark:border-gray-800" src="https://i.pinimg.com/564x/35/6d/4d/356d4dc7b7f2e21fd075cbfaf9ce2b00.jpg" alt="">
                <img class="w-10 h-10 border-2 border-white rounded-full dark:border-gray-800" src="https://i.pinimg.com/474x/e9/b1/71/e9b1715d8408331c535706d52d6b03e8.jpg" alt="">
                <img class="w-10 h-10 border-2 border-white rounded-full dark:border-gray-800" src="https://i.pinimg.com/564x/35/6d/4d/356d4dc7b7f2e21fd075cbfaf9ce2b00.jpg" alt="">
                <img class="w-10 h-10 border-2 border-white rounded-full dark:border-gray-800" src="https://i.pinimg.com/474x/e9/b1/71/e9b1715d8408331c535706d52d6b03e8.jpg" alt="">
            </div>
            </td> -->
          <!-- <td class="px-6 py-4"> itemFormDA.departemen </td> -->
          <!-- ngif status draft atau publish -->
          <td class="px-6 py-4 font-medium">
            <p *ngIf="beritaAcara.form_status === 'Draft'"
              class="flex items-center justify-center text-center px-2 py-1 text-gray-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path fill="currentColor" d="M12 16.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9Z"></path>
              </svg>
              Draft
            </p>
            <p *ngIf="beritaAcara.form_status === 'Published'"
              class="flex items-center justify-center text-center px-2 py-1 text-green-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path fill="currentColor" d="M12 16.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9Z"></path>
              </svg>
              Published
            </p>
          </td>
          <!-- Button Popover -->
          <td class="px-6 py-4 ">
            <div class="relative">
              <button (click)="togglePopover($event, i)"
                class="p-2 bg-blue-400 text-white rounded-xl hover:bg-blue-600">
                <svg width="46" height="46" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 13.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path>
                  <path d="M6 13.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path>
                  <path d="M18 13.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path>
                </svg>
              </button>
              <div *ngIf="popoverIndex === i"
                class="popover-content absolute right-full top-0 mr-2 w-44 border rounded-lg bg-white shadow-lg z-[2] ">
                <div class="py-2">
                  <button (click)="openEditModal(beritaAcara.form_uuid)"
                    class="w-full flex items-center text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white transition duration-150 ease-in-out">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2"
                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-3"></path>
                      <path d="M9 14.996h3l8.5-8.5a2.121 2.121 0 0 0-3-3l-8.5 8.5v3Z"></path>
                      <path d="m16 5 3 3"></path>
                    </svg>
                    Edit
                  </button>
                  <button *ngIf="beritaAcara.form_status === 'Draft'" (click)="publish(beritaAcara.form_uuid)"
                    class="w-full flex items-center text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white transition duration-150 ease-in-out">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" stroke-linecap="round"
                      stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="m2.49 9.371 18.75-7.096a.375.375 0 0 1 .485.484l-7.097 18.75a.375.375 0 0 1-.703-.016l-3.159-7.785a.75.75 0 0 0-.474-.474l-7.785-3.157a.375.375 0 0 1-.016-.706v0Z">
                      </path>
                      <path d="M21.563 2.438 10.64 13.358"></path>
                    </svg>
                    Publish
                  </button>
                  <button *ngIf="beritaAcara.form_status === 'Published'"
                    class="w-full flex items-center text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white transition duration-150 ease-in-out">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                      viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M15.75 3h1.5a2.25 2.25 0 0 1 2.25 2.25v15a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25v-15A2.25 2.25 0 0 1 6.75 3h1.5">
                      </path>
                      <path
                        d="M14.525 1.5h-5.05c-.677 0-1.225.548-1.225 1.225v.55c0 .677.548 1.225 1.225 1.225h5.05c.677 0 1.225-.548 1.225-1.225v-.55c0-.677-.548-1.225-1.225-1.225Z">
                      </path>
                    </svg>
                    Generate Link
                  </button>
                  <button (click)="openPreviewPage(beritaAcara.form_uuid)"
                    class="w-full flex items-center text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white transition duration-150 ease-in-out">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" stroke-linecap="round"
                      stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M11.984 5.25c-3.653 0-7.401 2.115-10.351 6.344a.75.75 0 0 0-.013.833c2.267 3.548 5.964 6.323 10.364 6.323 4.352 0 8.125-2.783 10.397-6.34a.757.757 0 0 0 0-.819C20.104 8.076 16.303 5.25 11.984 5.25Z">
                      </path>
                      <path d="M12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"></path>
                    </svg>
                    Preview
                  </button>
                  <button (click)="onDeleteBeritaAcara(beritaAcara.form_uuid)"
                    class="w-full flex items-center text-left px-4 py-2 hover:bg-gray-100 text-red-500 dark:hover:bg-gray-600 dark:hover:text-white transition duration-150 ease-in-out">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2"
                      stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg">
                      <path d="m5.25 5.25.938 15c.044.867.675 1.5 1.5 1.5h8.625c.828 0 1.447-.633 1.5-1.5l.937-15">
                      </path>
                      <path d="M3.75 5.25h16.5"></path>
                      <path d="M9 5.25V3.375a1.122 1.122 0 0 1 1.125-1.125h3.75A1.121 1.121 0 0 1 15 3.375V5.25">
                      </path>
                      <path d="M12 8.25v10.5"></path>
                      <path d="M8.625 8.25 9 18.75"></path>
                      <path d="M15.375 8.25 15 18.75"></path>
                    </svg>
                    Delete
                  </button>
                </div>
                <div
                  class="absolute -right-2 top-3 w-0 h-0 border-t-8 border-b-8 border-l-8 border-transparent border-l-[#cdcdd1]">
                </div>
              </div>
            </div>
          </td>
          <!-- </ng-container> -->
        </tr>
        <!-- </ng-container> -->

      </tbody>
    </table>
  </div>
</ng-template>


<ng-container *ngIf="isPreview; else tableView">
  <div class="p-4">
    <button (click)="closePreviewPage()"
      class="flex items-center mb-6 px-4 py-2 bg-white border rounded-full shadow space-x-4 sticky-top hover:border-blue-300 hover:text-blue-400 hover:shadow-blue-300">
      <svg class="h-7 w-7" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
        stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M6 11.996h12"></path>
        <path d="m12 18-6-6 6-6"></path>
      </svg>
      <p>Back</p>
    </button>

    <h1 class="text-2xl font-semibold">Preview dan Approval Formulir Dampak Analisa (DA)</h1>
    <p class="text-sm text-gray-500 font-medium">Lorem ipsum dolor sit amet consectetur adipisicing elit.
      Necessitatibus, accusantium. Animi, facere. Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsum, ut.
    </p>
    <br>
    <div class="w-full md:px-5">
      <div
        class="mx-auto px-9 py-12 text-sm md:text-base bg-gray-50 border-2 border-neutral-400 border-dashed shadow min-w-[160mm] md:min-w-[210mm]">


        <div class="mt-10 w-full">

          <div class="w-full text-center text-sm font-bold">
            <h1 class="uppercase">BERITA ACARA {{jenis}} ASSET</h1>
            <p>
              <span>No. </span>
              <span>{{form_number}}</span>
            </p>
          </div>
          <hr class="bg-black h-[1.5px] w-[90%] my-5 mx-auto">

          <P class="text-sm">Pada hari ini <b>{{day}}</b> tanggal <b>{{date}}</b> bulan <b>{{month}}</b> tahun <b>{{year}}</b> kami
            yang bertanda
            tangan di bawah ini:</P>
          <div class="my-3 px-4 text-sm">
            <P>PT AINO yang diwakili:</P>
            <table class="text-sm">
              <tr>
                <td class="pr-2">1.</td>
                <td class="pr-10">Nama</td>
                <td class="px-1">:</td>
                <td>{{pihak_pertama}}</td>
              </tr>
              <tr>
                <td class="pr-2">2.</td>
                <td class="pr-10">Jabatan</td>
                <td class="px-1">:</td>
                <td>{{jabatan_pihak_pertama}}</td>
              </tr>
            </table>

            <p class="text-sm">Selanjutnya dalam Berita Acara Penggunaan Aset ini disebut <b>PIHAK PERTAMA</b></p>
            <P class="text-sm">Dengan</P>
            <table class="text-sm">
              <tr>
                <td class="pr-2">1.</td>
                <td class="pr-10">Nama</td>
                <td class="px-1">:</td>
                <td>{{nama_pic}}</td>
              </tr>
              <tr>
                <td class="pr-2">2.</td>
                <td class="pr-10">Jabatan</td>
                <td class="px-1">:</td>
                <td>{{jabatan_pic}}</td>
              </tr>
            </table>
            <p>Selanjutnya dalam Berita Acara Penggunaan Aset ini disebut <b>PIHAK KEDUA</b></p>
          </div>

          <ng-container *ngIf="jenis === 'Penggunaan'">
            <p class="text-sm">
              Pada Tanggal <b>{{date}}</b> bulan <b>{{month}}</b> tahun <b>{{year}}</b>, telah dilakukan serah terima fasilitas Aset Pihak Pertama berupa 1 (satu) unit Laptop beserta dengan Charger dan Battery dengan spesifikasi sebagai berikut:
            </p>
          </ng-container>
          
          <ng-container *ngIf="jenis === 'Pengembalian'">
            <p class="text-sm">
              Pada Tanggal <b>{{date}}</b> bulan <b>{{month}}</b> tahun <b>{{year}}</b>,  <b>PIHAK PERTAMA</b> telah mengembalikan aset perusahaan kepada <b>PIHAK KEDUA</b> berupa 1 unit ... beserta dengan charger dan battery dengan spesifikasi sebagai berikut:
            </p>
          </ng-container>        

            <p class="text-red-500 text-xs">*untuk spesifikasi masih belum oke</p>
          <div class="my-3 px-4 text-sm border">
            <table>
              <tr>
                <td>a.</td>
                <td>Nama Aset</td>
                <td>:</td>
                <td>{{nama_asset}}</td>
              </tr>
              <tr>
                <td>b.</td>
                <td>Kode Aset</td>
                <td>:</td>
                <td>{{kode_asset}}</td>
              </tr>
              <tr>
                <td>c.</td>
                <td>Merk</td>
                <td>:</td>
                <td>Dell</td>
              </tr>
              <tr>
                <td>d.</td>
                <td>Model</td>
                <td>:</td>
                <td>Inspiron 15</td>
              </tr>
              <tr>
                <td>e.</td>
                <td>Serial Number</td>
                <td>:</td>
                <td>{{serial_number}}</td>
              </tr>
              <tr>
                <td>f.</td>
                <td>Kondisi</td>
                <td>:</td>
                <td>Baik</td>
              </tr>
              <tr>
                <td>g.</td>
                <td>Aksesoris</td>
                <td>:</td>
                <td>Charger, Battery</td>
              </tr>
            </table>
          </div>
          
          <p class="my-7 text-red-500 text-xs">*text disini juga blm bener</p>
          <p class="text-sm border" *ngIf="jenis === 'Penggunaan'">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Accusantium eaque, molestiae laudantium
            temporibus deleniti quidem inventore labore. Praesentium quae molestias accusamus quaerat nulla similique,
            dolorum voluptas autem repellendus. Dolorum cum reiciendis dolores eius quis id alias harum pariatur aliquam
            autem quas dolore, fuga, ad delectus, temporibus ex et! Eaque labore adipisci unde maiores numquam ex at
            dolores corrupti cupiditate illo voluptatem commodi quasi sequi magnam sit nihil ipsa quo est reprehenderit,
            voluptate accusantium. Modi quia quas amet ad vero omnis autem? Architecto itaque alias ratione sequi? Eos
            sunt, mollitia tenetur eveniet temporibus obcaecati consequuntur illum harum facere blanditiis, maiores
            exercitationem?</p>
        </div>

        
        <div class="grid grid-cols-2 gap-32 w-full h-64">
          <div class="flex items-center justify-center">
            <div class="text-center">
              <img class="w-36 aspect-square" src="https://i.pinimg.com/enabled/564x/35/86/9a/35869a7942016a41fef5c21928c1fb40.jpg" alt="">
              <p>({{pihak_pertama}})</p>
            </div>
          </div>
          <div class="flex items-center justify-center">
            <div class="text-center">
              <img class="w-36 aspect-square" src="https://i.pinimg.com/enabled/564x/35/86/9a/35869a7942016a41fef5c21928c1fb40.jpg" alt="">
              <p>({{nama_pic}})</p>
            </div>
          </div>
        </div>


      </div>
    </div>


    <button (click)="closePreviewPage()"
      class="flex items-center mt-6 px-4 py-2 bg-white border rounded-full shadow space-x-4 sticky-top hover:border-blue-300 hover:text-blue-400 hover:shadow-blue-300">
      <svg class="h-7 w-7" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
        stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M6 11.996h12"></path>
        <path d="m12 18-6-6 6-6"></path>
      </svg>
      <p>Back</p>
    </button>
  </div>
</ng-container>

<!-- Edit MODAL -->
<div *ngIf="isModalEditOpen" tabindex="-1" aria-hidden="true"
  class="fixed top-0 left-0 right-0 bottom-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50">
  <div
    class="relative p w-full max-w-xl md:max-w-2xl bg-white rounded-lg shadow dark:bg-gray-700 max-h-[90vh] overflow-y-auto mx-4 md:mx-0">
    <!-- Modal header -->
    <div class="sticky top-0 flex items-center justify-between p-4 border-b rounded-t bg-white dark:border-gray-600">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
        Edit
      </h3>
      <button (click)="closeEditModal()"
        class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white">
        <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
        </svg>
        <span class="sr-only">Close modal</span>
      </button>
    </div>
    <!-- Modal body -->
    <form class="p-6">

      <div class="mt-4">
        <label for="daNo" class="text-sm md:text-base mb-1 font-medium">Pihak Pertama</label>
        <input type="text" class="border text-sm rounded-xl p-2 px-3 w-full" [(ngModel)]="pihak_pertama"
          name="pihak_pertama" placeholder="Masukkan Nama Pihak Pertama">
      </div>

      <div class="mt-4">
        <label for="daNo" class="text-sm md:text-base mb-1 font-medium">Jabatan Pihak Pertama</label>
        <input type="text" class="border text-sm rounded-xl p-2 px-3 w-full" [(ngModel)]="jabatan_pihak_pertama"
          name="jabatan_pihak_pertama" placeholder="Masukkan Jabatan Pihak Pertama">
      </div>

      <div class="mt-4">
        <label for="daNo" class="text-sm md:text-base mb-1 font-medium">Nama PIC</label>
        <input type="text" class="border text-sm rounded-xl p-2 px-3 w-full" [(ngModel)]="nama_pic" name="nama_pic"
          placeholder="Masukkan Nama PIC">
      </div>

      <div class="mt-4">
        <label for="daNo" class="text-sm md:text-base mb-1 font-medium">Jabatan PIC</label>
        <input type="text" class="border text-sm rounded-xl p-2 px-3 w-full" [(ngModel)]="jabatan_pic"
          name="jabatan_pic" placeholder="Masukkan Nama Jabatan PIC">
      </div>
    </form>

    <!-- Modal footer -->
    <div class="flex items-center p-4 border-t border-gray-200 rounded-b dark:border-gray-600">
      <button type="submit"
        class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Draft</button>
      <button type="button"
        class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700">Cancel</button>
    </div>
  </div>
</div>